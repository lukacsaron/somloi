function lscf_data_to_filter_subcategories(a,b,c){var d,e,f,g=lscf_return_tax_main_slug(b.ID);if(a=removeObjectKey(a,b.ID),g=lscf_return_tax_main_slug(b.ID),d=parseInt(b.value),a=removeObjectLikeKey(a,g),"undefined"!=typeof c.post_taxonomies[g]&&"undefined"!=typeof c.post_taxonomies[g].tax.subcategs_hierarchy&&"undefined"!=typeof c.post_taxonomies[g].tax.subcategs_hierarchy[d]){e=c.post_taxonomies[g].tax.subcategs_hierarchy[d];for(var h=0;h<e.length;h++)"undefined"!=typeof c.post_taxonomies[g].tax.subcategs_hierarchy[e[h]]&&(f=g+"_-_"+e[h],a[f]={ID:f,type:b.type,value:e[h],filter_as:b.filter_as})}return a}function removeObjectKey(a,b){var c={};for(var d in a)a[d].ID!=b&&(c[d]=a[d]);return c}function removeObjectLikeKey(a,b){var c={};for(var d in a)-1===d.indexOf(b)&&(c[d]=a[d]);return c}function lscf_display_tax_subcategs(a){var b=jQuery;b(".lscf-taxonomies-fields").each(function(){var c=b(this).closest(".lscf-container").attr("data-index"),d=b(this).find(".px_capf-field").attr("data-id");if("undefined"==typeof a[d])return void b(this).find(".subcategs-tax").hide();var e=a[d];b(this).find(".subcategs-tax").each(function(){var a=parseInt(b(this).attr("data-parent")),d=b(this);e.indexOf(a)!=-1?d.fadeIn():(d.hide(),d.find(".styledSelect").text(lscfShortcodeData[c].options.writing.select),d.find(".px_capf-field").removeClass("active-val"),d.find('input[type="radio"]').removeAttr("checked"))})})}function lscf_reset_default_filter(a,b){var c=b.value,d=lscf_return_tax_main_slug(b.ID);if("undefined"!=typeof a.active_terms)for(var e in a.active_terms)if("undefined"!=typeof a.active_terms[e]){var f=new RegExp(d,"g");a.active_terms[e].match(f)&&(delete a.active_terms[e],a.active_terms.length--)}if("undefined"!=typeof a[d]){var g=a[d].tax;for(var h in g.terms)if(0===c)delete a[d];else if("undefined"!=typeof a[d]&&"undefined"!=typeof a[d].tax&&g.terms[h].data.value!=c)if(1==g.terms.length)delete a[d];else{delete a[d].tax.terms[h];var i=lscf_reset_object_index(a[d].terms);a[d].terms=i,a[d].terms.length=i.length,0===i.length&&delete a[d]}}return a}function lscf_return_tax_main_slug(a){var b=a;if(a.match(/(.+?)_-_([0-9]+)$/)){var c=a.match(/(.+?)_-_([0-9]+)$/);b=c[1]}return b}function lscf_reset_object_index(a){var b=[];for(var c in a){"undefined"==typeof b[c]&&(b[c]=[]);for(var d in a[c])b[c].push(a[c][d])}return b}function lscf_custom_dropdowns_update_options_classnames(){var a=jQuery;a(".pxSelectField").each(function(){var b=a(this);a(this).find("select option").each(function(c){1==a(this).attr("ng-data-disabled")?b.find(".lscf-dropdown-option").eq(c).addClass("lscf-option-disabled"):b.find(".lscf-dropdown-option").eq(c).removeClass("lscf-option-disabled")})})}function lscf_sanitize_string(a){return a=a.replace(/([\!\@\#\$\%\^\&\*\(\[\)\]\{\-\}\\\/\:\;\+\=\.\\<\,\>\?\~\`\'\" ]+)/g,"_"),a.toLowerCase()}function lscf_convert_object_to_array(a){if("undefined"==typeof a)return[];if("undefined"!=typeof a.length)return a;var b=[];for(var c in a)b.push(a[c]);return b}function lscfEventListenerOnCustomTemplateReady(a){var b=new CustomEvent("lscf_on_custom_template_ready",{detail:a});window.dispatchEvent(b)}function lscfEventListenerPostsLoadCallback(a){var b=new CustomEvent("lscf_posts_load_callback",{detail:a});window.dispatchEvent(b)}function lscfAccordionPosts(){var a=jQuery,b=this;this.options={link_type:0},this.init=function(){if(a(".lscf-custom-template-wrapper").hasClass("lscf-posts-accordion"))return a(".lscf-posts-accordion .lscf-title").unbind("click"),"link-only"!==b.options.link_type&&void a(".lscf-posts-accordion .lscf-title").bind("click",function(b){var c=a(this).closest(".lscf-accordion-post");if(c.hasClass("active"))return c.find(".post-caption").animate({height:0},400),c.removeClass("active"),c.addClass("inactive"),!1;a(".lscf-accordion-post").removeClass("active"),a(".lscf-accordion-post").addClass("inactive"),c.addClass("active"),c.removeClass("inactive");var d=c.find(".caption").height()+40;return c.find(".post-caption").animate({height:d},400),a(".lscf-accordion-post.inactive").find(".post-caption").animate({height:0},300),b.preventDefault(),b.stopPropagation(),!1})}}function lscf_initLiveSearch(a){var b,c=jQuery,d=this;this.ready=function(){c(".lscf-live-search-input").length&&c(".lscf-live-search-input").length>0&&(clearInterval(b),a())},b=setInterval(d.ready(),500),setTimeout(function(){clearInterval(b)},3e3)}function lscfSidebarCustomizator(a){var b=jQuery,c=this;this.ajaxRequest=new lscfGeneralAjaxRequests(a),this.templateData={active_terms:[],settings:{run_shortcodes:{key:"run_shortcodes",value:"undefined"!=typeof a.options.run_shortcodes?a.options.run_shortcodes:0},disable_empty_option_on_filtering:{key:"disable_empty_option_on_filtering",value:"undefined"!=typeof a.options.disable_empty_option_on_filtering?a.options.disable_empty_option_on_filtering:0},infinite_scrolling:{key:"infinite_scrolling",value:"undefined"!=typeof a.options.infinite_scrolling?a.options.infinite_scrolling:0},url_history:{key:"url_history",value:"undefined"!=typeof a.options.url_history?a.options.url_history:0},instant_search:{key:"instant_search",value:"undefined"!=typeof a.options.instant_search?a.options.instant_search:1},hide_see_more_on_checkboxes_list:{key:"hide_see_more_on_checkboxes_list",value:"undefined"!=typeof a.options.hide_see_more_on_checkboxes_list?a.options.hide_see_more_on_checkboxes_list:0},general_search_data:[{id:"post_title",name:"Post Title"},{id:"post_content",name:"Post Content"}],range_filtering_type:{key:"range_filtering_type",value:"undefined"!=typeof a.options.range_filtering_type?a.options.range_filtering_type:"lscf_number"},general_search_conditional_logic:{key:"general_search_conditional_logic",value:"undefined"!=typeof a.options.general_search_conditional_logic?a.options.general_search_conditional_logic:"and"},general_search_algorithm:{key:"general_search_algorithm",value:"undefined"!=typeof a.options.general_search_algorithm?a.options.general_search_algorithm:"algorithm-1"},checkboxes_conditional_logic:{key:"checkboxes_conditional_logic",value:"undefined"!=typeof a.options.checkboxes_conditional_logic?a.options.checkboxes_conditional_logic:"or"},lscf_custom_fields_order_as:{key:"lscf_custom_fields_order_as",value:"undefined"!=typeof a.options.lscf_custom_fields_order_as?a.options.lscf_custom_fields_order_as:"number"},woo_price_format:{key:"woo_price_format",value:"undefined"!=typeof a.options.woo_price_format?a.options.woo_price_format:0},woo_instock:{key:"woo_instock",value:"undefined"!=typeof a.options.woo_instock?a.options.woo_instock:0},orderable_list:[{id:"post_title",name:"undefined"!=typeof a.options.writing.title?a.options.writing.title:"Title"},{id:"post_date",name:"undefined"!=typeof a.options.writing.date?a.options.writing.date:"Date"},{id:"id",name:"ID"},{id:"menu_order",name:"Menu Order"},{id:"woo_price",name:"WooCommerce Price"}],order_by:{items:[]},general_search_by:{items:[]},default_order_by:{key:"default_order_by",value:"undefined"!=typeof a.options.default_order_by?a.options.default_order_by.value:"post_date",order_as:"undefined"!=typeof a.options.default_order_by?a.options.default_order_by.order_as:"asc"}},post_taxonomies:{items:[],set_tax_term_as_active:function(){return function(a,b){if(c.templateData.active_terms.length>0&&-1!==c.templateData.active_terms.indexOf(b(a)))return'checked="checked"'}}},post_custom_fields:{items:[]},set_settings_option_as_active:function(){return function(a,b){if(1==c.templateData.settings[b(a)].value)return'checked="checked"'}},set_as_active_if_match:function(){return function(a,b){var c=b(a).split("__pxlt__");if(c[0].trim()==c[1].trim())return"checked"}},set_order_fields_as_active:function(){return function(a,b){for(var d=0;d<c.templateData.settings.order_by.items.length;d++)if(c.templateData.settings.order_by.items[d].id==b(a))return'checked="checked"'}},set_general_search_active_items:function(){return function(a,b){for(var d=0;d<c.templateData.settings.general_search_by.items.length;d++)if(c.templateData.settings.general_search_by.items[d].id==b(a))return'checked="checked"'}}},this.templates={},this.templates.loadTaxonomies=function(c,d){var e=a.plugin_url+"assets/js/templates/live-customizer/tax-template.html";b.get(e,function(a){var e=Mustache_2.render(b(a).filter("#template-tax").html(),c);d(e)})},this.templates.loadTemplate=function(a,c,d){b.get(c,function(c){var e=Mustache_2.render(b(c).filter("#template-tax").html(),a);d(e)})},this.serializeExtraOptions=function(){var a=b(".lscf-extrasidebar-template").attr("data-fields-type"),d={type:a,data:{}};switch(a){case"taxonomies-listing":d.data.post_taxonomies={};var e,f,g;c.templateData.active_terms=[],b(".lscf-taxonomies-block").each(function(){b(this).find(".px-checkbox:checked").each(function(){e=b(this).attr("data-taxonomy"),"undefined"==typeof d.data.post_taxonomies[e]&&(d.data.post_taxonomies[e]={},d.data.post_taxonomies[e].ID=e,d.data.post_taxonomies[e].group_type="taxonomies",d.data.post_taxonomies[e].tax={terms:[]}),f=parseInt(b(this).val().split("!#")[0]),g=b(this).val().split("!#")[1],d.data.post_taxonomies[e].tax.terms.push({data:{name:g,value:f}}),c.templateData.active_terms.push(f+"-"+e)})}),d.data.post_taxonomies.active_terms=c.templateData.active_terms;break;case"woo-settings":case"settings-page":d.data.settings={},c.templateData.settings.order_by.items=[],c.templateData.settings.general_search_by.items=[],b('.lscf-fronteditor-settings input[type="checkbox"]').each(function(){var a=b(this).attr("data-key");b(this).hasClass("has-multple-values")?(b(this).prop("checked")&&c.templateData.settings[a].items.push({id:b(this).val(),name:b(this).attr("data-name")}),d.data.settings[a]=c.templateData.settings[a]):(c.templateData.settings[a].value=b(this).prop("checked")?1:0,d.data.settings[a]=c.templateData.settings[a])}),b('.lscf-fronteditor-settings input[type="radio"]').each(function(){var a=b(this).attr("data-key"),e=b(this).attr("data-value");b(this).is(":checked")&&("undefined"!=typeof e?c.templateData.settings[a][e]=b(this).val():c.templateData.settings[a].value=b(this).val(),d.data.settings[a]=c.templateData.settings[a])})}return d},this.init=function(){"undefined"!=typeof a.options.order_by&&"undefined"!=typeof a.options.order_by.items&&(c.templateData.settings.order_by.items=a.options.order_by.items),"undefined"!=typeof a.options.general_search_by&&"undefined"!=typeof a.options.general_search_by.items&&(c.templateData.settings.general_search_by.items=a.options.general_search_by.items),c.ajaxRequest.getCustomFieldsByPostType(a.postType,"all",function(a){if("undefined"!=typeof a.success&&1==a.success){var b=a.data.data.fields;b.forEach(function(a){var b="px_date"===a.slug?a.field_form_id+"_timestamp":a.field_form_id,d={id:b,name:a.name};c.templateData.post_custom_fields.items.push(d),c.templateData.settings.orderable_list.push(d),c.templateData.settings.general_search_data.push(d)})}}),"undefined"!=typeof a.settings.theme.posts_display_from&&"undefined"!=typeof a.settings.theme.posts_display_from.post_taxonomies&&"undefined"!=typeof a.settings.theme.posts_display_from.post_taxonomies.active_terms&&(c.templateData.active_terms=a.settings.theme.posts_display_from.post_taxonomies.active_terms),c.get_post_taxonomies_and_terms(function(a){c.templateData.post_taxonomies.items=a}),b("#lscf-expand-sidebar-extra-options, .lscf-open-extra-sidebar").click(function(){b(".lscf-close-customizer").addClass("lscf-hide"),b(".lscf-sidebar-extra-container").addClass("active");var a=b(this).closest(".lscf-sidebar-option").attr("data-type");c.loadExtraSidebarContent(a)}),b(".lscf-open-customizer").click(function(){b(this).addClass("deactivate-animations"),b(".lscf-sidebar-live-customizer").addClass("active"),b("#lscf-posts-wrapper").addClass("translate")}),b(".lscf-close-customizer").click(function(){b(".lscf-sidebar-live-customizer").removeClass("active"),b("#lscf-posts-wrapper").removeClass("translate")}),c.initCustomDropdown();var d=b(".lscf-theme-list").find('input[type="radio"]:checked').val();c.initThemeOptions(d)},this.loadExtraSidebarContent=function(d){var e;switch(d){case"show-from-categories":c.templates.loadTaxonomies(c.templateData.post_taxonomies,function(a){b(".lscf-sidebar-extra-container-wrapper").html(a),b(".lscf-sidebar-extra-container-wrapper").customScrollbar()});break;case"filter-settings":e=a.plugin_url+"assets/js/templates/live-customizer/settings-template.html",c.templates.loadTemplate(c.templateData,e,function(a){b(".lscf-sidebar-extra-container-wrapper").html(a),b(".lscf-sidebar-extra-container-wrapper").customScrollbar()});break;case"woo-settings":e=a.plugin_url+"assets/js/templates/live-customizer/woo-settings-template.html",c.templates.loadTemplate(c.templateData,e,function(a){b(".lscf-sidebar-extra-container-wrapper").html(a),b(".lscf-sidebar-extra-container-wrapper").customScrollbar()})}},this.saveExtraOptions=function(a){b("#save-and-close-extra-options").click(function(){b(".lscf-close-customizer").removeClass("lscf-hide"),b(".lscf-sidebar-extra-container").removeClass("active");var d=c.serializeExtraOptions();a(d)})},this.initColorpicker=function(a){var c=!1;b(".lscf-colorpicker").colorPicker({renderCallback:function(b,d){if(!0===d&&(c=!1),!1===d&&!1===c){c=!0;var e=b[0].style.backgroundColor.replace(/rgb\(|\)/g,""),f=b[0].value;a({hex:f,rgb:e})}}})},this.generateDynamicCssColor=function(c){b.ajax({type:"POST",url:a.ajax_url,data:{action:"px-plugin-ajax",section:"generate-theme-color-style",color:c},success:function(a){var b=document.getElementById("px_base-inline-css");b.innerHTML=a},dataType:"html"})},this.get_post_taxonomies_and_terms=function(c){b.ajax({type:"POST",url:a.ajax_url,data:{action:"lscf-administrator-ajax",section:"get_taxonomies_and_terms",post_type:a.postType},success:function(a){c(a)},dataType:"json"})},this.saveSettings=function(c){b.ajax({type:"POST",url:a.ajax_url,data:{action:"lscf-administrator-ajax",section:"save-filter-settings",filter_id:a.ID,settings:c},success:function(a){},dataType:"html"})},this.onFormAction=function(a){var d,e,f,g,h={};b(".lscf-sidebar-option").each(function(){switch(d=b(this).attr("data-field-type")){case"dropdown":b(this).find(".options li ").each(function(){b(this).click(function(){f=b(this).attr("rel"),e=b(this).closest(".lscf-sidebar-option").attr("data-type"),h={fieldType:d,dataType:e,fieldValue:f},a(h)})});break;case"checkbox":b(this).find("#lscf-fields-ordering").click(function(){var c=b(this).closest(".lscf-check-btn");f="undefined"!=typeof c.find('input[type="checkbox"]:checked').val()?parseInt(c.find('input[type="checkbox"]:checked').val()):0,e=b(this).closest(".lscf-sidebar-option").attr("data-type"),h={fieldType:d,dataType:e,fieldValue:!f},a(h)});break;case"radiobutton":b(this).on("click",".lscf-live-customizer-radiobutton-label",function(){f=b(this).attr("data-value"),c.initThemeOptions(f),"custom-theme"==f&&(g=b(this).attr("data-index")),e="theme-style",h={fieldType:d,dataType:e,fieldValue:f,custom_theme_active_index:g},a(h)});break;case"number":b(this).find('input[type="number"]').blur(function(){f="NaN"!==parseInt(b(this).val())?parseInt(b(this).val()):15,e=b(this).closest(".lscf-sidebar-option").attr("data-type"),h={fieldType:d,dataType:e,fieldValue:f},a(h)})}})},this.initThemeOptions=function(a){switch(b(".lscf-optional-option").hide(),a){case"default":b(".lscf-optional-grid").fadeIn(),b(".lscf-optional-viewchanger").fadeIn();break;case"accordion":b(".lscf-optional-linktype").fadeIn();break;case"portrait":b(".lscf-optional-grid").fadeIn();break;case"woocommerce-grid":case"basic-grid":b(".lscf-optional-grid").fadeIn()}},this.initCustomDropdown=function(){b(".lscf-custom-select-dropwdown").each(function(){var a=b(this).attr("data-class"),c=b(this),d=b(this).children("option").length;c.addClass("s-hidden"),c.wrap('<div class="select '+a+'"></div>'),c.after('<div class="styledSelect"></div>');var e,f,g=c.next("div.styledSelect");c.find("option").each(function(a){b(this).is(":selected")&&(f=a)}),e=c.find("option:selected")?c.find("option:selected").text():c.children("option").eq(0).text(),g.text(e);for(var h=b("<ul />",{class:"options"}).insertAfter(g),i=0;i<d;i++){var j=f==i?"pxselect-hidden-list":"";b("<li />",{text:c.children("option").eq(i).text(),rel:c.children("option").eq(i).val(),class:j}).appendTo(h)}var k=h.children("li");g.click(function(a){a.stopPropagation(),b("div.styledSelect.active").each(function(){b(this).removeClass("active").next("ul.options").hide()}),b(this).toggleClass("active").next("ul.options").toggle()}),k.click(function(a){k.removeClass("pxselect-hidden-list"),b(this).addClass("pxselect-hidden-list"),a.stopPropagation(),g.text(b(this).text()).removeClass("active"),c.val(b(this).attr("rel")),h.hide()}),b(document).click(function(){g.removeClass("active"),h.hide()})})}}function lscfGeneralAjaxRequests(a){var b=jQuery,c="px-plugin-ajax";this.getCustomFieldsByPostType=function(d,e,f){b.ajax({type:"POST",url:a.ajax_url,data:{action:c,section:"getPostType_customFields",fieldType:e,post_type:d},success:function(a){f(a)},dataType:"json"})}}function lscfSortingCustomDropddown(){var a=jQuery;a(".lscf-sorting-custom-dropdown").each(function(){var b=a(this).attr("data-class"),c=a(this),d=a(this).children("option").length;c.addClass("s-hidden"),c.wrap('<div class="select '+b+'"></div>'),c.after('<div class="styledSelect"></div>');var e=c.next("div.styledSelect");e.text(c.children("option").eq(0).text());for(var f=a("<div />",{class:"options"}).insertAfter(e),g=0;g<d;g++){var h=0===g?"lscf-dropdown-option pxselect-hidden-list":"lscf-dropdown-option";a("<div />",{text:c.children("option").eq(g).text(),rel:c.children("option").eq(g).val(),class:h}).appendTo(f)}var i=f.children(".lscf-dropdown-option");e.click(function(b){b.stopPropagation(),a("div.styledSelect.active").each(function(){a(this).removeClass("active").next("div.options").hide()}),a(this).toggleClass("active").next("div.options").toggle(),a(this).toggleClass("active").next("div.options").customScrollbar()}),i.click(function(b){i.removeClass("pxselect-hidden-list"),a(this).addClass("pxselect-hidden-list"),b.stopPropagation(),e.text(a(this).text()).removeClass("active"),c.val(a(this).attr("rel")),f.hide()}),a(document).click(function(){e.removeClass("active"),f.hide()})})}var angAppName="",appElems=document.querySelectorAll("[ng-app]"),lscfContainers=document.querySelectorAll(".lscf-container"),lscfDomainName=lscfShortcodeData[0].site_url.match(/((http|https):\/\/(.+))?\./);lscfDomainName="undefined"!=typeof lscfDomainName[1]?lscfDomainName[1]:"",appElems.length>=1?(angAppName=appElems[0].getAttribute("ng-app"),"lscf-app"===angAppName&&1<=lscfContainers.length&&angular.module("lscf-app",["ngSanitize","ngAnimate"]).config(["$sceDelegateProvider",function(a){a.resourceUrlWhitelist(["self",lscfShortcodeData[0].plugin_url+"**","**"])}])):(angAppName="lscf-app",angular.module("lscf-app",["ngSanitize","ngAnimate"]).config(["$sceDelegateProvider",function(a){a.resourceUrlWhitelist(["self",lscfShortcodeData[0].plugin_url+"**","**"])}])),angular.module(angAppName).controller("pxfilterController",["$location","$scope","$sce","$attrs","customFilterService",function(a,b,c,d,e){function f(){var a=document.documentElement.scrollTop||document.body.scrollTop,c=document.body,d=document.documentElement,e=Math.max(c.scrollHeight,c.offsetHeight,d.clientHeight,d.scrollHeight,d.offsetHeight),f=window.innerHeight;a+f+250>=e&&!1===b.loadMoreBtn.loading&&(b.load_more(),e=Math.max(c.scrollHeight,c.offsetHeight,d.clientHeight,d.scrollHeight,d.offsetHeight))}var g=lscfShortcodeData[d.index];g.shortcodeIndex=d.index;var h,i,j,k,l=g.post_per_page,m=1,o=g.ID,p=g.postType,q=new px_customRange(parseInt(d.index)),r=new customSelectBox,s=new lscfOrderFilterFields(g),t=null,u=new pxFilterFieldsAction(g);b.loading=!1,b.noResults=!1,b.morePostsAvailable=!1,b.variations={},b.featuredLabel=!1,b.postType=p,b.existsPosts=!1,b.filterPostsTemplate={},b.directiveInfo={},b.liveSearchTemplate={class:""},b.actionSettings={controllerAttributes:d,style:{postMaxHeight:null},filtersOnly:!1,customFields:[],urlActiveFilters:null,pxCurrentPage:m,postsPerPage:l,lsLoadPosts:!0,activeTerms:[],postsCount:"",pagesCount:"",activeQuery:[],filterPostsTemplate:[],previousSidebarPosition:"",disableInactiveTerms:!1,initSidebar:!1,initPostTheme:!1,initFieldsDraggable:!1,isAdministrator:"undefined"!=typeof g.settings.is_administrator?parseInt(g.settings.is_administrator):0},b.lscfSidebar={},b.loadMoreBtn={morePostsAvailable:!1,noResults:!1,loading:!1,postsLoading:!0,sidebarLoading:!0,ready:!0,type:"default"},b.pluginSettings={className:{sidebar:"",posts_theme:""},existsPosts:!0,pluginPath:g.plugin_url,filterSettings:g.settings,generalSettings:g.options,editShortcodeLink:g.site_url+"/wp-admin/admin.php?page=pxLF_plugin&plugin-tab=filter-generator&edit_filter="+g.ID},b.alternativeFilteringTaxInnactiveClass=function(a,c){if(!0===a&&1==b.actionSettings.disableInactiveTerms)return c},b.checkboxListClassname=function(a){var c="";return 1!==b.pluginSettings.generalSettings.hide_see_more_on_checkboxes_list&&a>4&&(c+=" px-hidden-opt"),c},b.returnFieldClassnames=function(a){var b="";return"undefined"!=typeof a.tax&&"undefined"!=typeof a.tax.subcategories_hierarchy_display&&1===a.tax.subcategories_hierarchy_display&&(b+=" lscf-hierarchical-terms"),"undefined"==typeof a.tax||"undefined"==typeof a.tax||"px_check_box"!=a.tax.display_as&&"px_radio_box"!=a.tax.display_as?"undefined"!=typeof a.group_type&&"additional_fields"==a.group_type?b+=" lscf-large-field":"undefined"==typeof a.display_as||"px_radio_box"!=a.display_as&&"px_check_box"!=a.display_as&&"px_icon_check_box"!=a.display_as&&"px_check_icon-only_box"!=a.display_as&&"px_check_icon-text_box"!=a.display_as?b:b+=" lscf-large-field":b+=" lscf-large-field"},b.actionSettings.buildUrlLocation=function(c){if("undefined"!=typeof b.pluginSettings.generalSettings&&1===b.pluginSettings.generalSettings.url_history){var d=b.actionSettings.urlActiveFilters.buildUrlLocation(c);a.search(d)}},b.trust_as_html=function(a){return c.trustAsHtml(a)},b.formatRangeValue=function(a,b,c){return"undefined"!=typeof c&&"right"===c?b+a:a+b},b.initRangeValue=function(a,c){var d="range_"+a.fieldID,e=a.label,f="max"===c?a.max:a.min;if(null===b.actionSettings.urlActiveFilters)return b.formatRangeValue(e,f,a.label_position);if("undefined"==typeof b.actionSettings.urlActiveFilters.activeFields||"undefined"==typeof b.actionSettings.urlActiveFilters.activeFields[d])return b.formatRangeValue(e,f,a.label_position);var g=b.actionSettings.urlActiveFilters.activeFields[d];return"undefined"==typeof g[0]||"undefined"==typeof g[1]?b.formatRangeValue(e,f,a.label_position):"min"===c?b.formatRangeValue(e,g[0],a.label_position):"max"===c?b.formatRangeValue(e,g[1],a.label_position):b.formatRangeValue(e,f,a.label_position)},b.calculateRangePosition=function(a,c,d,e){var f="range_"+a;if(null===b.actionSettings.urlActiveFilters)return"default";if("undefined"==typeof b.actionSettings.urlActiveFilters.activeFields||"undefined"==typeof b.actionSettings.urlActiveFilters.activeFields[f])return"default";var g=b.actionSettings.urlActiveFilters.activeFields[f];if("undefined"==typeof g[0]||"undefined"==typeof g[1])return"default";if("min"===e){var h=100*(g[0]-c)/(d-c);return h}if("max"===e){var i=100*(g[1]-c)/(d-c);return i}return"default"},b.filterFieldIsSelected=function(a,c,d){if(!0===d)return!0;var e=b.actionSettings.urlActiveFilters;return null!==e&&("undefined"!=typeof e.activeFields[a]&&(-1<e.activeFields[a].indexOf(c.toString())||void 0))},b.filterFieldClassIsActive=function(a,c){return!0===b.filterFieldIsSelected(a,c,!1)?"active":""},b.standartize_shortcodes_container_height=function(){var a=jQuery,c=!1,d=b.actionSettings.style.postMaxHeight;return a(".lscf-standartize-shorcodes-container-height").length>0?(c=!0,a(".lscf-standartize-shorcodes-container-height").each(function(){var b=a(this).height();d<b&&(d=b)}),setTimeout(function(){a(".lscf-standartize-shorcodes-container-height").attr({style:"height:"+d+"px"})},200),void(b.actionSettings.style.postMaxHeight=d)):void setTimeout(function(){b.standartize_shortcodes_container_height()},300)},"woocommerce"===b.pluginSettings.generalSettings.filter_type&&"undefined"!=typeof b.pluginSettings.generalSettings.woo_instock&&1===b.pluginSettings.generalSettings.woo_instock&&b.actionSettings.activeQuery.push({ID:"woocommerce-instock",filter_as:"px_select_box",group_type:"custom_field",type:"select",value:"instock",variation_id:null}),b.lscfPrepareFilterData=function(a){var c,d=b.actionSettings.activeQuery;return a.forEach(function(a){switch(c="add",a.type){case"date-interval":if(""===a.fields.from||""===a.fields.to)return;break;case"checkbox_post_terms":if(0===a.value.length){if(d=removeObjectKey(d,a.ID),null!==t){t.default_filter.post_taxonomies=lscf_reset_default_filter(t.default_filter.post_taxonomies,a);break}"cf_variation"==a.group_type&&("undefined"==typeof b.variations[a.ID]&&(b.variations[a.variation_id]={}),b.variations[a.variation_id].active="default"),c="remove"}break;case"px_icon_check_box":case"checkbox":if(0===a.value.length){if(d=removeObjectKey(d,a.ID),"checkbox_post_terms"==a.filter_as&&null!==t){t.default_filter.post_taxonomies=lscf_reset_default_filter(t.default_filter.post_taxonomies,a);break}"cf_variation"==a.group_type&&("undefined"==typeof b.variations[a.ID]&&(b.variations[a.variation_id]={}),b.variations[a.variation_id].active="default"),c="remove"}break;case"select":if(a.value.constructor===Array?sVal=a.value[0]:sVal=a.value,"select"==sVal.toLowerCase()||"0"==sVal){if(d=removeObjectKey(d,a.ID),d=removeObjectLikeKey(d,a.ID),"cf_variation"==a.group_type&&("undefined"==typeof b.variations[a.ID]&&(b.variations[a.variation_id]={}),b.variations[a.variation_id].active="default"),c="remove","checkbox_post_terms"==a.filter_as&&null!==t){t.default_filter.post_taxonomies=lscf_reset_default_filter(t.default_filter.post_taxonomies,a);break}}else"checkbox_post_terms"==a.filter_as&&(d=lscf_data_to_filter_subcategories(d,a,h));break;case"radio":if(a.value.constructor===Array?sVal=a.value[0]:sVal=a.value,"0"==sVal){if(d=removeObjectKey(d,a.ID),c="remove","cf_variation"==a.group_type&&("undefined"==typeof b.variations[a.ID]&&(b.variations[a.variation_id]={}),b.variations[a.variation_id].active="default"),"checkbox_post_terms"==a.filter_as&&null!==t){t.default_filter.post_taxonomies=lscf_reset_default_filter(t.default_filter.post_taxonomies,a);break}}else"checkbox_post_terms"==a.filter_as&&(d=lscf_data_to_filter_subcategories(d,a,h));break;case"date":""===a.value&&(d=removeObjectKey(d,a.ID),c="remove")}if("add"==c){if("cf_variation"==a.group_type){"undefined"==typeof b.variations[a.ID]&&(b.variations[a.variation_id]={});var e=a.value.constructor==Array?a.value[0]:a.value;b.variations[a.variation_id].active=lscf_sanitize_string(e)}var f=!1;for(var g in d)if(d[g].ID==a.ID){d[g]=a,f=!0;break}if(!1===f&&(d[a.ID]=a),"checkbox_post_terms"==a.filter_as)for(var i in d)if("default_filter"==d[i].type){t.default_filter.post_taxonomies=lscf_reset_default_filter(t.default_filter.post_taxonomies,a);break}b.loadMoreBtn.type="default"}}),d},b.lscfGetTaxDataFromFilters=function(a,b){var c,d=[],e=[];for(var f in a){var g=a[f];if("undefined"!=typeof g.ID&&"undefined"!=typeof g.filter_as&&"checkbox_post_terms"==g.filter_as){var h,i=lscf_return_tax_main_slug(g.ID);if("undefined"==typeof d[i]&&(d[i]=[],e.push(g.ID)),Array===g.value.constructor)for(var j=0;j<g.value.length;j++){if("undefined"!=typeof b.post_taxonomies[i]&&"undefined"!=typeof b.post_taxonomies[i].tax.subcategs_hierarchy&&"undefined"!=typeof b.post_taxonomies[i].tax.subcategs_hierarchy[g.value[j]])for(c=b.post_taxonomies[i].tax.subcategs_hierarchy[g.value[j]],n=0;n<c.length;n++)h=parseInt(c[n]),d[i][h]=h;h=parseInt(g.value[j]),d[i][h]=h}else if(h=parseInt(g.value),d[i][h]=h,"undefined"!=typeof b.post_taxonomies[i]&&"undefined"!=typeof b.post_taxonomies[i].tax.subcategs_hierarchy&&"undefined"!=typeof b.post_taxonomies[i].tax.subcategs_hierarchy[g.value])for(c=b.post_taxonomies[i].tax.subcategs_hierarchy[g.value],n=0;n<c.length;n++)h=parseInt(c[n]),d[i][h]=h}}return{activeTaxonomySlugs:e,activeTaxonomyTermIds:d}},b.buildQueryFromDefaultFilter=function(a,b){if(null!==a&&"undefined"!=typeof a.default_filter.post_taxonomies&&"undefined"!=typeof a.default_filter.post_taxonomies.active_terms&&a.default_filter.post_taxonomies.active_terms.length>0){var c={};for(ki=0;ki<a.default_filter.post_taxonomies.active_terms.length;ki++){var d=a.default_filter.post_taxonomies.active_terms[ki];if(d.match(/([0-9]+)-(.+?)$/)){var e=d.match(/([0-9]+)-(.+?)$/),f=e[1],g=e[2];-1==b.indexOf(g)&&("undefined"==typeof c[g]?c[g]={ID:g,filter_as:"checkbox_post_terms",group_type:"taxonomies",type:"checkbox_post_terms",value:[f],variation_id:null}:c[g].value.push(f))}}return c}},b.lscfBuildFilterQueryArgs=function(a,c,d){if(b.loadMoreBtn.postsLoading=!0,a.constructor!==Array){var e=[];e[0]=a,a=e}dataToFilter=b.lscfPrepareFilterData(a);var f=b.lscfGetTaxDataFromFilters(dataToFilter,d),g=f.activeTaxonomyTermIds,h=f.activeTaxonomySlugs;g=lscf_reset_object_index(g),lscf_display_tax_subcategs(g);var i=b.buildQueryFromDefaultFilter(c,h),j=[];for(var k in dataToFilter){var l=dataToFilter[k];"undefined"!=typeof l.ID&&""!==l.value&&j.push(l)}for(var m in i)j.push(i[m]);return b.actionSettings.activeQuery=j,b.actionSettings.customFields=j,j},b.reset_filter=function(){u.reset_fields(),e.getPosts(p,b.actionSettings.postsPerPage,1,b.actionSettings.activeQuery,g).then(function(a){a=a.data,b.actionSettings.activeTerms=a.active_terms,b.filterPostsTemplate.filter_type=a.filter_type,b.loadMoreBtn.postsLoading=!1,a.posts.length>0?b.loadMoreBtn.noResults=!1:b.loadMoreBtn.noResults=!0,1===a.featuredLabel&&(b.featuredLabel=!0),b.actionSettings.postsCount=a.postsCount,b.actionSettings.pagesCount=a.pages,b.actionSettings.pxCurrentPage=m+1,b.allPostsCount=a.postsCount,b.actionSettings.pxCurrentPage<=a.pages&&(b.loadMoreBtn.morePostsAvailable=!0),b.actionSettings.filterPostsTemplate=a.posts,b.filterPostsTemplate.posts=b.actionSettings.filterPostsTemplate,b.directiveInfo.ready(),b.directiveInfo.afterPostsLoadCallback(),b.loadMoreBtn.postsLoading=!1}),dataToFilter=null,dataToFilter=[],b.actionSettings.customFields=null,b.actionSettings.customFields=[],b.actionSettings.pxCurrentPage=2,b.loadMoreBtn.noResults=!1,b.directiveInfo.afterPostsLoadCallback(),a.search("")},1===b.pluginSettings.generalSettings.infinite_scrolling?window.addEventListener("scroll",f):window.removeEventListener("scroll",f),b.makeWrapperClassName=function(){var a={sidebar:"",posts_theme:""};return"top"==b.pluginSettings.filterSettings.theme.sidebar.position||"0"==b.pluginSettings.filterSettings.theme.sidebar.position?(a.sidebar="col-sm-12 col-md-12 col-lg-12 lscf-horizontal-sidebar ",a.posts_theme="col-sm-12 col-md-12 col-lg-12 lscf-wide-posts "):(a.sidebar=g.settings.theme.columns>3?"col-sm-2 col-md-2 col-lg-2 ":"col-sm-3 col-md-3 col-lg-3 ",a.posts_theme=g.settings.theme.columns>3?"col-sm-10 col-md-10 col-lg-10 ":"col-sm-9 col-md-9 col-lg-9 "),a},b.$watch("actionSettings.postsPerPage",function(a,c){a!=c&&e.getPosts(p,b.actionSettings.postsPerPage,m,b.actionSettings.activeQuery,g).then(function(a){a=a.data,b.actionSettings.postsCount=a.postsCount,b.actionSettings.pagesCount=a.pages,b.actionSettings.pxCurrentPage=m+1,b.actionSettings.pxCurrentPage>a.pages&&(b.loadMoreBtn.morePostsAvailable=!1),b.loadMoreBtn.loading=!1,b.actionSettings.filterPostsTemplate=a.posts,b.filterPostsTemplate.posts=b.actionSettings.filterPostsTemplate,b.directiveInfo.afterPostsLoadCallback()})}),b.$watch("actionSettings.initFieldsDraggable",function(a,b){!0===a&&(s.fieldsData={fields:h.default_data.fields,filterID:o},setTimeout(function(){s.draggable.initFilterFields(),s.draggable.initOptionOrder()},300)),!1===a&&(s.draggable.unbindOrder(),s.draggable.unbindOptionOrder())}),b.$watch("actionSettings.initPostTheme",function(a,c){
!0===a&&(b.actionSettings.initPostTheme=!1,b.directiveInfo.ready())}),i=b.makeWrapperClassName(b.pluginSettings.filterSettings.theme.sidebar.position),b.pluginSettings.className.sidebar=i.sidebar,b.pluginSettings.className.posts_theme=i.posts_theme,b.load_more=function(){if(b.loadMoreBtn.loading=!0,!1!==b.loadMoreBtn.morePostsAvailable){if(jQuery(".lscf-standartize-shorcodes-container-height").removeClass("lscf-standartize-shorcodes-container-height"),"range"==b.loadMoreBtn.type){for(var a=b.actionSettings.rangeCurrentPage,c=b.actionSettings.postsPerPage,d=parseInt(a)*parseInt(c),f=[],h=d;h<b.matched_posts.length&&("undefined"!=typeof b.matched_posts[h]&&h<d+parseInt(c));h++)f.push(b.matched_posts[h]);return b.matched_posts.length<=d+parseInt(c)?b.loadMoreBtn.morePostsAvailable=!1:b.loadMoreBtn.morePostsAvailable=!0,b.actionSettings.filterPostsTemplate=b.actionSettings.filterPostsTemplate.concat(f),b.filterPostsTemplate.posts=b.actionSettings.filterPostsTemplate,b.directiveInfo.afterPostsLoadCallback(),b.actionSettings.rangeCurrentPage+=1,void(b.loadMoreBtn.loading=!1)}var i=b.actionSettings.activeQuery;null!==t&&0===i.length&&(i=t),e.getPosts(p,b.actionSettings.postsPerPage,b.actionSettings.pxCurrentPage,i,g).then(function(a){a=a.data,b.actionSettings.postsCount=a.postsCount,b.actionSettings.pagesCount=a.pages,b.actionSettings.pxCurrentPage+=1,b.actionSettings.pxCurrentPage>a.pages&&(b.loadMoreBtn.morePostsAvailable=!1),b.loadMoreBtn.loading=!1,b.actionSettings.filterPostsTemplate=b.actionSettings.filterPostsTemplate.concat(a.posts),b.filterPostsTemplate.posts=b.actionSettings.filterPostsTemplate,b.directiveInfo.afterPostsLoadCallback()})}},e.getSidebar().then(function(a){a=a.data,b.lscfSidebar.html=a}),e.getFilterFields(o).then(function(c){c=c.data;var d;if(b.pluginSettings.main=c.settings,b.loadMoreBtn.sidebarLoading=!1,b.actionSettings.urlActiveFilters=new lscfLoadFiltersFromUrl(a.search(),c.fields_object),"undefined"!=typeof c.default_data.custom_templates&&(b.pluginSettings.custom_templates=c.default_data.custom_templates),"undefined"!=typeof c.default_data.settings.theme.posts_display_from&&"undefined"!==c.default_data.settings.theme.posts_display_from.post_taxonomies.active_terms&&c.default_data.settings.theme.posts_display_from.post_taxonomies.active_terms.length>0){var f={default_filter:{}};"undefined"!=typeof c.fields&&(f.default_filter.fields=c.fields),f.default_filter.post_taxonomies=c.default_data.settings.theme.posts_display_from.post_taxonomies,t=f,d=b.buildQueryFromDefaultFilter(t,[]);for(var i in d)b.actionSettings.activeQuery.push(d[i]);"woocommerce"===b.pluginSettings.generalSettings.filter_type&&"undefined"!=typeof b.pluginSettings.generalSettings.woo_instock&&1===b.pluginSettings.generalSettings.woo_instock&&(d.woo_instock={ID:"woocommerce-instock",filter_as:"px_select_box",group_type:"custom_field",type:"select",value:"instock",variation_id:null})}else t=null;b.actionSettings.urlActiveFilters.hasCustomFieldsOrTaxonomies()&&(d=b.lscfBuildFilterQueryArgs(b.actionSettings.urlActiveFilters.activeFilters.filters,t,c)),d=lscf_convert_object_to_array(d),b.actionSettings.activeQuery=d,e.getPosts(p,b.actionSettings.postsPerPage,m,d,g).then(function(a){a=a.data,b.actionSettings.activeTerms=a.active_terms,b.filterPostsTemplate.filter_type=a.filter_type,b.loadMoreBtn.postsLoading=!1,a.posts.length>0?b.loadMoreBtn.noResults=!1:b.loadMoreBtn.noResults=!0,1===a.featuredLabel&&(b.featuredLabel=!0),b.actionSettings.postsCount=a.postsCount,b.actionSettings.pagesCount=a.pages,b.actionSettings.pxCurrentPage=m+1,b.allPostsCount=a.postsCount,b.actionSettings.pxCurrentPage<=a.pages&&(b.loadMoreBtn.morePostsAvailable=!0),b.actionSettings.filterPostsTemplate=a.posts,b.filterPostsTemplate.posts=b.actionSettings.filterPostsTemplate,b.directiveInfo.ready(),b.directiveInfo.afterPostsLoadCallback(),b.loadMoreBtn.postsLoading=!1});if(null!==t)for(var l=0;l<t.default_filter.post_taxonomies.active_terms.length;l++)for(var n=t.default_filter.post_taxonomies.active_terms[l].match(/^([0-9]+)-(.*)/),o=parseInt(n[1]),s=n[2],v=0;v<c.fields.length;v++)if("taxonomies"==c.fields[v].group_type&&"undefined"!=typeof c.fields[v].tax&&c.fields[v].tax.slug==s){c.fields[v].tax.activeTermsLength=t.default_filter.post_taxonomies.active_terms.length;for(var w=0;w<c.fields[v].tax.terms.length;w++){var x=c.fields[v].tax.terms[w];o==x.data.value&&(c.fields[v].tax.terms[w].checked=!0)}}h=c,b.filterFieldsTemplate=h,b.actionSettings.initSidebar=!0,b.$watch("actionSettings.initSidebar",function(a,d){if(j="left"==b.pluginSettings.filterSettings.theme.sidebar.position||"top"==b.pluginSettings.filterSettings.theme.sidebar.position?1:2,"left"==b.actionSettings.previousSidebarPosition||"top"==b.actionSettings.previousSidebarPosition?k=1:""!==b.actionSettings.previousSidebarPosition&&(k=2),!0===a){if(b.actionSettings.initSidebar=!1,b.actionSettings.previousSidebarPosition=b.pluginSettings.filterSettings.theme.sidebar.position,j===k)return;r.construct(),u.construct(function(a){var d=b.lscfBuildFilterQueryArgs(a,t,c);b.actionSettings.buildUrlLocation(d),d=lscf_convert_object_to_array(d),e.getPosts(p,b.actionSettings.postsPerPage,m,d,g).then(function(a){if(a=a.data,b.actionSettings.lsLoadPosts=!0,a.active_terms.length>0){b.actionSettings.disableInactiveTerms=!0;for(var c=b.filterFieldsTemplate.fields,e=0;e<c.length;e++)if("taxonomies"==c[e].group_type)for(var f=0;f<c[e].tax.terms.length;f++){var g=c[e].tax.terms[f].data.value;"undefined"==typeof a.active_terms[g]?c[e].tax.terms[f].data.not_active=!0:c[e].tax.terms[f].data.not_active=!1}else if("custom_field"==c[e].group_type&&"undefined"!=typeof a.active_terms.custom_fields&&"undefined"!=typeof c[e].options)for(var h=0;h<c[e].options.length;h++){var i=c[e].ID+lscf_sanitize_string(c[e].options[h].opt);"undefined"==typeof a.active_terms.custom_fields[i]?c[e].options[h].not_active=!0:c[e].options[h].not_active=!1}b.filterFieldsTemplate.fields=c,setTimeout(function(){lscf_custom_dropdowns_update_options_classnames()},500)}else b.actionSettings.disableInactiveTerms=!1,setTimeout(function(){lscf_custom_dropdowns_update_options_classnames()},500);a.posts.length>0?b.loadMoreBtn.noResults=!1:b.loadMoreBtn.noResults=!0,b.actionSettings.activeTerms=a.active_terms,b.actionSettings.postsCount=a.postsCount,b.actionSettings.pagesCount=a.pages,b.actionSettings.pxCurrentPage=m+1,b.actionSettings.customFields=d,b.actionSettings.pxCurrentPage<=a.pages?b.loadMoreBtn.morePostsAvailable=!0:b.loadMoreBtn.morePostsAvailable=!1,b.actionSettings.filterPostsTemplate=a.posts,b.filterPostsTemplate.posts=a.posts,b.loadMoreBtn.postsLoading=!1,b.directiveInfo.afterPostsLoadCallback()})})}}),q.construct(function(a){m=1;for(var c=b.actionSettings.activeQuery,d=!1,f=0;f<c.length;f++)"undefined"!=typeof c[f].ID&&a.ID===c[f].ID&&"range"===c[f].type&&(c[f]=a,d=!0);!1===d&&c.push(a),b.loadMoreBtn.postsLoading=!0,b.actionSettings.rangeCurrentPage=2,b.actionSettings.buildUrlLocation(c),c=lscf_convert_object_to_array(c),e.getPosts(p,b.actionSettings.postsPerPage,m,c,g).then(function(a){a=a.data,a.posts.length>0?b.loadMoreBtn.noResults=!1:b.loadMoreBtn.noResults=!0,b.actionSettings.activeTerms=a.active_terms,b.matched_posts=a.matched_posts,b.actionSettings.postsCount=a.postsCount,b.actionSettings.pagesCount=a.pages,b.actionSettings.pxCurrentPage=m+1,b.actionSettings.customFields=c,b.actionSettings.pxCurrentPage<=a.pages?b.loadMoreBtn.morePostsAvailable=!0:b.loadMoreBtn.morePostsAvailable=!1,b.actionSettings.filterPostsTemplate=a.posts,b.filterPostsTemplate.posts=a.posts,b.directiveInfo.afterPostsLoadCallback(),b.loadMoreBtn.postsLoading=!1})})})}]),angular.module(angAppName).controller("lscfFiltersOnlyController",["$scope","$sce","$location","$attrs","customFilterService",function(a,b,c,d,e){var f=d.index,g=lscfShortcodeData[f];g.shortcodeIndex=d.index;var h=new px_customRange(parseInt(d.index)),i=new customSelectBox,j=(new lscfOrderFilterFields(g),new pxFilterFieldsAction(g)),k=g.ID;filterFieldsTemplate=[],a.actionSettings={controllerAttributes:d,redirectURI:"",filtersOnly:!0,activeQuery:[],style:{postMaxHeight:null},initSidebar:!1,customFields:[],isAdministrator:"undefined"!=typeof g.settings.is_administrator?parseInt(g.settings.is_administrator):0},a.pluginSettings={className:{sidebar:"",posts_theme:""},ajaxSearch:!0,existsPosts:!0,pluginPath:g.plugin_url,filterSettings:g.settings,generalSettings:g.options,editShortcodeLink:g.site_url+"/wp-admin/admin.php?page=pxLF_plugin&plugin-tab=filter-generator&edit_filter="+g.ID},a.filterPostsTemplate={},a.reload_page=function(a){var b=window.location.href.replace(/(.+?)(\/$)|(\/#.*$)/,"$1"),c=scope.pluginSettings.filterSettings.redirect_page.replace(/(.+?)(\/$)|(\/#.*$)/,"$1");window.location.href=scope.pluginSettings.filterSettings.redirect_page+"#!/"+scope.actionSettings.redirectURI,b==c&&window.location.reload()},a.checkboxListClassname=function(b){var c="";return 1!==a.pluginSettings.generalSettings.hide_see_more_on_checkboxes_list&&b>5&&(c+=" px-hidden-opt"),c},a.returnFieldClassnames=function(a){var b="";return"undefined"!=typeof a.tax&&"undefined"!=typeof a.tax.subcategories_hierarchy_display&&1===a.tax.subcategories_hierarchy_display&&(b+="lscf-hierarchical-terms"),"undefined"==typeof a.tax||"undefined"==typeof a.tax||"px_check_box"!=a.tax.display_as&&"px_radio_box"!=a.tax.display_as?"undefined"!=typeof a.group_type&&"additional_fields"==a.group_type?b+="lscf-large-field":"undefined"==typeof a.display_as||"px_radio_box"!=a.display_as&&"px_check_box"!=a.display_as&&"px_icon_check_box"!=a.display_as&&"px_check_icon-only_box"!=a.display_as&&"px_check_icon-text_box"!=a.display_as?b:b+="lscf-large-field":b+="lscf-large-field"},a.formatRangeValue=function(a,b,c){return"undefined"!==c&&"right"===c?b+a:a+b},a.initRangeValue=function(b,c){var d="range_"+b.fieldID,e=b.label,f="max"===c?b.max:b.min;if("undefined"==typeof b.label_position&&(b.label_position="right"),null===a.actionSettings.urlActiveFilters)return a.formatRangeValue(e,f,b.label_position);if("undefined"==typeof a.actionSettings.urlActiveFilters.activeFields||"undefined"==typeof a.actionSettings.urlActiveFilters.activeFields[d])return a.formatRangeValue(e,f,b.label_position);var g=a.actionSettings.urlActiveFilters.activeFields[d];return"undefined"==typeof g[0]||"undefined"==typeof g[1]?a.formatRangeValue(e,f,b.label_position):"min"===c?a.formatRangeValue(e,g[0],b.label_position):"max"===c?a.formatRangeValue(e,g[1],b.label_position):a.formatRangeValue(e,f,b.label_position)},a.lscfPrepareFilterData=function(b){var c,d=a.actionSettings.customFields;return b.forEach(function(b){switch(c="add",b.type){case"date-interval":if(""===b.fields.from||""===b.fields.to)return;break;case"checkbox_post_terms":0===b.value.length&&(d=removeObjectKey(d,b.ID),"cf_variation"==b.group_type&&("undefined"==typeof a.variations[b.ID]&&(a.variations[b.variation_id]={}),a.variations[b.variation_id].active="default"),c="remove");break;case"px_icon_check_box":case"checkbox":if(0===b.value.length){if(d=removeObjectKey(d,b.ID),"checkbox_post_terms"==b.filter_as)for(var e in d)if("default_filter"==d[e].type){d[e].default_filter.post_taxonomies=lscf_reset_default_filter(d[e].default_filter.post_taxonomies,b);break}"cf_variation"==b.group_type&&("undefined"==typeof a.variations[b.ID]&&(a.variations[b.variation_id]={}),a.variations[b.variation_id].active="default"),c="remove"}break;case"select":if(b.value.constructor===Array?sVal=b.value[0]:sVal=b.value,"select"==sVal.toLowerCase()||"0"==sVal){if(d=removeObjectKey(d,b.ID),d=removeObjectLikeKey(d,b.ID),"cf_variation"==b.group_type&&("undefined"==typeof a.variations[b.ID]&&(a.variations[b.variation_id]={}),a.variations[b.variation_id].active="default"),c="remove","checkbox_post_terms"==b.filter_as)for(var f in d)if("default_filter"==d[f].type){d[f].default_filter.post_taxonomies=lscf_reset_default_filter(d[f].default_filter.post_taxonomies,b);break}}else"checkbox_post_terms"==b.filter_as&&(d=lscf_data_to_filter_subcategories(d,b,filterFieldsTemplate));break;case"radio":if(b.value.constructor===Array?sVal=b.value[0]:sVal=b.value,"0"==sVal){if(d=removeObjectKey(d,b.ID),c="remove","cf_variation"==b.group_type&&("undefined"==typeof a.variations[b.ID]&&(a.variations[b.variation_id]={}),a.variations[b.variation_id].active="default"),"checkbox_post_terms"==b.filter_as)for(var g in d)if("default_filter"==d[g].type){d[g].default_filter.post_taxonomies=lscf_reset_default_filter(d[g].default_filter.post_taxonomies,b);break}}else"checkbox_post_terms"==b.filter_as&&(d=lscf_data_to_filter_subcategories(d,b,filterFieldsTemplate));break;case"date":""===b.value&&(d=removeObjectKey(d,b.ID),c="remove")}if("add"==c){if("cf_variation"==b.group_type){"undefined"==typeof a.variations[b.ID]&&(a.variations[b.variation_id]={});var h=b.value.constructor==Array?b.value[0]:b.value;a.variations[b.variation_id].active=lscf_sanitize_string(h)}var i=!1;for(var j in d)if(d[j].ID==b.ID){d[j]=b,i=!0;break}if(!1===i&&(d[b.ID]=b),"checkbox_post_terms"==b.filter_as)for(var k in d)if("default_filter"==d[k].type){d[k].default_filter.post_taxonomies=lscf_reset_default_filter(d[k].default_filter.post_taxonomies,b);break}}}),d},a.lscfGetTaxDataFromFilters=function(a,b){var c,d=[],e=[];for(var f in a){var g=a[f];if("undefined"!=typeof g.ID&&"undefined"!=typeof g.filter_as&&"checkbox_post_terms"==g.filter_as){var h,i=lscf_return_tax_main_slug(g.ID);if("undefined"==typeof d[i]&&(d[i]=[],e.push(g.ID)),Array===g.value.constructor)for(var j=0;j<g.value.length;j++){if("undefined"!=typeof b.post_taxonomies[i]&&"undefined"!=typeof b.post_taxonomies[i].tax.subcategs_hierarchy&&"undefined"!=typeof b.post_taxonomies[i].tax.subcategs_hierarchy[g.value[j]])for(c=b.post_taxonomies[i].tax.subcategs_hierarchy[g.value[j]],n=0;n<c.length;n++)h=parseInt(c[n]),d[i][h]=h;h=parseInt(g.value[j]),d[i][h]=h}else if(h=parseInt(g.value),d[i][h]=h,"undefined"!=typeof b.post_taxonomies[i]&&"undefined"!=typeof b.post_taxonomies[i].tax.subcategs_hierarchy&&"undefined"!=typeof b.post_taxonomies[i].tax.subcategs_hierarchy[g.value])for(c=b.post_taxonomies[i].tax.subcategs_hierarchy[g.value],n=0;n<c.length;n++)h=parseInt(c[n]),d[i][h]=h}}return{activeTaxonomySlugs:e,activeTaxonomyTermIds:d}},a.buildQueryFromDefaultFilter=function(a,b){if(null!==a&&"undefined"!=typeof a.default_filter.post_taxonomies&&"undefined"!=typeof a.default_filter.post_taxonomies.active_terms&&a.default_filter.post_taxonomies.active_terms.length>0){var c={};for(ki=0;ki<a.default_filter.post_taxonomies.active_terms.length;ki++){var d=a.default_filter.post_taxonomies.active_terms[ki];if(d.match(/([0-9]+)-(.+?)$/)){var e=d.match(/([0-9]+)-(.+?)$/),f=e[1],g=e[2];-1==b.indexOf(g)&&("undefined"==typeof c[g]?c[g]={ID:g,filter_as:"checkbox_post_terms",group_type:"taxonomies",type:"checkbox_post_terms",value:[f],variation_id:null}:c[g].value.push(f))}}return c}},a.lscfBuildFilterQueryArgs=function(b,c,d){if(b.constructor!==Array){var e=[];e[0]=b,b=e}dataToFilter=a.lscfPrepareFilterData(b);var f=a.lscfGetTaxDataFromFilters(dataToFilter,d),g=f.activeTaxonomyTermIds,h=f.activeTaxonomySlugs;g=lscf_reset_object_index(g),lscf_display_tax_subcategs(g);var i=a.buildQueryFromDefaultFilter(c,h),j=[];for(var k in dataToFilter){var l=dataToFilter[k];"undefined"!=typeof l.ID&&j.push(l)}for(var m in i)j.push(i[m]);return a.actionSettings.customFields=j,a.actionSettings.activeQuery=j,j},e.getFilterFields(k).then(function(b){b=b.data,filterType=b.filter_type;var d=null;a.actionSettings.urlActiveFilters=new lscfLoadFiltersFromUrl(c.search(),b.fields_object),a.actionSettings.urlActiveFilters.hasCustomFieldsOrTaxonomies()&&(d=a.lscfBuildFilterQueryArgs(a.actionSettings.urlActiveFilters.activeFilters.filters,null,b)),filterFieldsTemplate=b,a.filterFieldsTemplate=filterFieldsTemplate,a.actionSettings.initSidebar=!0,i.construct(),j.construct(function(d){var e=a.lscfBuildFilterQueryArgs(d,null,b),f=a.actionSettings.urlActiveFilters.buildUrlLocation(e),g=c.search(f).url();c.search(""),a.$apply(function(){a.actionSettings.redirectURI=g})}),h.construct(function(b){for(var d=a.actionSettings.customFields,e=!1,f=0;f<d.length;f++)"undefined"!=typeof d[f].ID&&b.ID===d[f].ID&&"range"===d[f].type&&(e=!0);!1===e&&d.push(b),a.actionSettings.customFields=d;var g=a.actionSettings.urlActiveFilters.buildUrlLocation(d),h=c.search(g).url();c.search(""),a.$apply(function(){a.actionSettings.redirectURI=h})})})}]),angular.module(angAppName).factory("capfAPI",["$http",function(a){var b=pxData.ajaxURL+"?action=px-ang-http",c=lscfShortcodeData[0].rest_api_uri+"lscf_rest/";return{uri:b,restApi:{uri:c,getSidebar:c+"get_sidebar",filterPosts:c+"filter_posts"}}}]),angular.module(angAppName).factory("customFilterService",["$http","capfAPI",function(a,b){function c(c){return a({method:"post",url:b.restApi.getSidebar,data:{filter_id:c}})}function d(){return a({method:"post",url:b.uri,data:{section:"getSidebar"}})}function e(c,d,e,f,i){return a({method:"post",url:b.restApi.filterPosts,data:{post_type:c,featured_label:i.featuredLabel,limit:d,page:e,q:f,is_wpml:g,lang:h,filter_id:i.ID}})}function f(c,d,e,f,i){return a({method:"post",url:b.restApi.filterPosts,data:{post_type:c,featured_label:i.featuredLabel,limit:d,page:e,q:f,is_wpml:g,lang:h,filter_id:i.ID}})}var g="1"===lscfShortcodeData[0].wpml?1:0,h=!1!==g?lscfShortcodeData[0].lang:null;return{getAllPosts:f,getFilterFields:c,getPosts:e,getSidebar:d}}]),angular.module(angAppName).directive("viewmodeAccordion",["customFilterService",function(a){return{restrict:"AE",scope:!0,bindToController:!0,controllerAs:"vm",templateUrl:lscfShortcodeData[0].plugin_url+"app/views/posts-accordion.html",link:function(a,b,c){function d(){var a=jQuery,b=this;this.options={link_type:0},this.init=function(){return a(".lscf-posts-accordion .lscf-title").unbind("click"),"link-only"!==b.options.link_type&&void a(".lscf-posts-accordion .lscf-title").bind("click",function(b){var c=a(this).closest(".lscf-accordion-post");if(c.hasClass("active"))return c.find(".post-caption").animate({height:0},400),c.removeClass("active"),c.addClass("inactive"),!1;a(".lscf-accordion-post").removeClass("active"),a(".lscf-accordion-post").addClass("inactive"),c.addClass("active"),c.removeClass("inactive");var d=c.find(".caption").height()+40;return c.find(".post-caption").animate({height:d},400),a(".lscf-accordion-post.inactive").find(".post-caption").animate({height:0},300),b.preventDefault(),b.stopPropagation(),!1})}}var e=new d;a.actionSettings.initPostTheme=!0,a.directiveInfo.ready=function(){e.options.link_type="undefined"!=typeof a.pluginSettings.filterSettings.theme.link_type?a.pluginSettings.filterSettings.theme.link_type:0,setTimeout(function(){e.init()},500)},a.directiveInfo.afterPostsLoadCallback=function(){setTimeout(function(){e.init()},500)}}}}]),angular.module(angAppName).directive("ajaxSearch",["$location","customFilterService",function(a,b){return{restrict:"AE",require:"?ngModel",scope:!0,bindToController:!0,controllerAs:"vm",link:function(c,d,e,f){var g=e.searchType,h=lscfShortcodeData[c.actionSettings.controllerAttributes.index];if(c.preventInputBlur=!1,null!==c.actionSettings.urlActiveFilters&&c.actionSettings.urlActiveFilters.hasGeneralSearch()){var i=c.actionSettings.urlActiveFilters.activeFilters.generalSearch,j=i[0].value;c.pxsearch=j}return c.buildLocationOnBlur=function(){if(!c.actionSettings.filtersOnly)return!0===c.preventInputBlur?void(c.preventInputBlur=!1):void c.ajaxSearch();for(var b=!1,d=c.actionSettings.activeQuery,e=0;e<d.length;e++)"undefined"!=typeof d[e].ID&&"ajax-main-search"===d[e].ID&&(d[e].value=c.pxsearch,b=!0);var f=d;!1===b&&f.push({ID:"ajax-main-search",value:c.pxsearch});var g=c.actionSettings.urlActiveFilters.buildUrlLocation(f),h=a.search(g).url();c.actionSettings.redirectURI=h;var i=window.location.href.replace(/(.+?)(\/$)|(\/#.*$)/,"$1"),j=c.pluginSettings.filterSettings.redirect_page.replace(/(.+?)(\/$)|(\/#.*$)/,"$1");i!=j&&a.search("")},"undefined"!=typeof c.actionSettings.filtersOnly&&!0===c.actionSettings.filtersOnly?(c.pxsearch="",void d.bind("keydown",function(a){if(13===a.which){c.buildLocationOnBlur();var b=window.location.href.replace(/(.+?)(\/$)|(\/#.*$)/,"$1"),d=c.pluginSettings.filterSettings.redirect_page.replace(/(.+?)(\/$)|(\/#.*$)/,"$1");window.location.href=c.pluginSettings.filterSettings.redirect_page+"#!"+c.actionSettings.redirectURI,b==d&&window.location.reload()}})):(c.ajaxSearch=function(){var a,d,e={},f=!1;if("undefined"!=typeof c.pxsearch||"undefined"!=typeof c.pxsearch_woo_sku){switch(g){case"general-search":a=""!==c.pxsearch?c.pxsearch:" ",f=!1;for(var i=0;i<c.actionSettings.activeQuery.length;i++)d=c.actionSettings.activeQuery[i],"ajax-main-search"==d.ID&&(c.actionSettings.activeQuery[i].value=a,f=!0);!1===f&&(e={ID:"ajax-main-search",filter_as:null,type:"main-search",value:a},c.actionSettings.activeQuery.push(e));break;case"woo-product-sku":a=c.pxsearch_woo_sku,f=!1;for(var j=0;j<c.actionSettings.activeQuery.length;j++)d=c.actionSettings.activeQuery[j],"ajax-product-sku-search"==d.ID&&(c.actionSettings.activeQuery[j].value=a,f=!0);!1===f&&(e={ID:"ajax-product-sku-search",filter_as:null,type:"main-search",value:a},c.actionSettings.activeQuery.push(e))}c.loadMoreBtn.postsLoading=!0,c.actionSettings.buildUrlLocation(c.actionSettings.activeQuery),b.getPosts(c.postType,c.actionSettings.postsPerPage,1,c.actionSettings.activeQuery,h).then(function(a){a=a.data,c.actionSettings.postsCount=a.postsCount,c.actionSettings.pagesCount=a.pages,c.actionSettings.pxCurrentPage=2,c.actionSettings.pxCurrentPage<=a.pages?c.loadMoreBtn.morePostsAvailable=!0:c.loadMoreBtn.morePostsAvailable=!1,a.posts.length>0?c.loadMoreBtn.noResults=!1:c.loadMoreBtn.noResults=!0,c.actionSettings.filterPostsTemplate=a.posts,c.filterPostsTemplate.posts=a.posts,c.loadMoreBtn.postsLoading=!1,c.directiveInfo.afterPostsLoadCallback()})}},void d.bind("keydown",function(a){13===a.which&&(c.ajaxSearch(),c.preventInputBlur=!0,a.preventDefault())}))}}}]),angular.module(angAppName).directive("viewmodeCustom",["customFilterService",function(a){return{restrict:"AE",scope:!0,bindToController:!0,controllerAs:"vm",link:function(a,b,c){var d=new lscfAccordionPosts;a.directiveInfo.ready=function(){setTimeout(function(){d.init()},500),"undefined"!=typeof lscfOnCustomTemplateReady&&lscfOnCustomTemplateReady(),setTimeout(function(){lscfEventListenerOnCustomTemplateReady()},300)},a.directiveInfo.afterPostsLoadCallback=function(){setTimeout(function(){d.init()},500),"undefined"!=typeof lscfPostsLoadCallback&&lscfPostsLoadCallback(),setTimeout(function(){lscfEventListenerPostsLoadCallback()},400)},a.changeGridType=function(b,c){for(var d=document.getElementsByClassName("lscf-woo-grid-type"),e=0;e<d.length;e++)d[e].className="lscf-woo-grid-type";b.currentTarget.className="lscf-woo-grid-type active",a.gridColumns=c}},template:'<div ng-include="pluginSettings.filterSettings.theme.custom_template.url">'}}]),angular.module(angAppName).directive("viewmodeDefault",["customFilterService",function(a){return{restrict:"AE",scope:!0,bindToController:!0,controllerAs:"vm",templateUrl:lscfShortcodeData[0].plugin_url+"app/views/posts-default.html",link:function(a,b,c){a.actionSettings.initPostTheme=!0;var d=new lscfPosts;shortcodeSettings=lscfShortcodeData[a.actionSettings.controllerAttributes.index],a.directiveInfo.ready=function(){a.standartize_shortcodes_container_height(),d.init(),"undefined"!=typeof shortcodeSettings.settings&&"undefined"!=typeof shortcodeSettings.settings.theme&&("undefined"!=typeof shortcodeSettings.settings.theme.viewchanger&&"undefined"!=typeof shortcodeSettings.settings.theme.viewchanger.list&&1!=shortcodeSettings.settings.theme.viewchanger.grid&&1==shortcodeSettings.settings.theme.viewchanger.list||(jQuery(".lscf-posts-block").addClass("block-view"),jQuery(".viewMode > div").removeClass("active"),jQuery(".viewMode #blockView").addClass("active")))},a.directiveInfo.afterPostsLoadCallback=function(){a.standartize_shortcodes_container_height()}}}}]),angular.module(angAppName).directive("liveSearch",["$location","customFilterService",function(a,b){return{restrict:"AE",require:"?ngModel",scope:!0,bindToController:!0,controllerAs:"vm",link:function(a,c,d,e){var f=null,g=!0,h=[],i=lscfShortcodeData[a.actionSettings.controllerAttributes.index];a.postsHasLoaded=!1,a.buildLocationOnBlur=function(){var b=[];if(null===h)return b.push({ID:"ajax-main-search",value:a.pxsearch}),void a.actionSettings.buildUrlLocation(b);for(var c=!1,d=0;d<h.length;d++)"undefined"!=typeof h[d]&&"undefined"!=typeof h[d].ID&&"ajax-main-search"===h[d].ID&&(""!==a.pxsearch?h[d].value=a.pxsearch:(delete h[d],h.length-=1),c=!0);b=h,!1===c&&""!==a.pxsearch&&b.push({ID:"ajax-main-search",value:a.pxsearch}),a.actionSettings.buildUrlLocation(b)},a.loadPostsOnFocus=function(){!0===a.actionSettings.lsLoadPosts&&(h=null,a.postsHasLoaded=!1,"undefined"!=typeof i.settings.theme.posts_display_from&&"undefined"!==i.settings.theme.posts_display_from.post_taxonomies.active_terms&&i.settings.theme.posts_display_from.post_taxonomies.active_terms.length>0&&(f={default_filter:{}},f.default_filter.post_taxonomies=i.settings.theme.posts_display_from.post_taxonomies,h=f),a.actionSettings.activeQuery.length>0&&(h=a.actionSettings.activeQuery),b.getAllPosts(a.postType,300,1,h,i).then(function(b){b=b.data,a.postsHasLoaded=!0,a.actionSettings.lsLoadPosts=!1,!0===g&&(lscfPostsList=new lscfPosts),g=!1,posts=b.posts}))},lscf_initLiveSearch(function(){if(null!==a.actionSettings.urlActiveFilters&&a.actionSettings.urlActiveFilters.hasGeneralSearch()){var b=a.actionSettings.urlActiveFilters.activeFilters.generalSearch,c=b[0].value;a.pxsearch=c}$j(".lscf-live-search-input").focus(function(){a.loadPostsOnFocus()})}),a.$watch("pxsearch",function(b,c){"undefined"!=typeof b&&b!=c&&(a.loadMoreBtn.postsLoading=!0),a.$watch("postsHasLoaded",function(d,e){if(!0===d&&"undefined"!=typeof b&&b!=c){a.$parent.loadMoreBtn.morePostsAvailable=!1;var f=[];""!==b&&"undefined"!=typeof posts?posts.forEach(function(a){var c=pxDecodeEntities(a.title.long.replace(/(<strong(.*?)class\=\"matched-word\"\>)|(<\/strong\>)/gi,"")),d=pxDecodeEntities(a.title.short.replace(/(<strong(.*?)class\=\"matched-word\"\>)|(<\/strong\>)/gi,"")),e=pxDecodeEntities(a.content.replace(/(<strong(.*?)class\=\"matched-word\"\>)|(<\/strong\>)/gi,""));b.toLowerCase()==d.toLowerCase()?a.class_name="ls-matches-search":a.class_name="",c.toLowerCase().indexOf(b.toLowerCase())==-1&&a.full_content.toLowerCase().indexOf(b.toLowerCase())==-1||(c=c.replace(new RegExp("("+b+")","ig"),'<strong class="matched-word">$1</strong>'),d=d.replace(new RegExp("("+b+")","ig"),'<strong class="matched-word">$1</strong>'),e=e.replace(new RegExp("("+b+")","ig"),'<strong class="matched-word">$1</strong>'),a.title.long=c,a.title.short=d,a.content=e,f.push(a))}):"undefined"!=typeof posts&&(a.loadMoreBtn.postsLoading=!0,posts.forEach(function(a){var b=a.title.long.replace(/(<strong(.*?)class\=\"matched-word\"\>)|(<\/strong\>)/gi,""),c=a.title.short.replace(/(<strong(.*?)class\=\"matched-word\"\>)|(<\/strong\>)/gi,""),d=a.content.replace(/(<strong(.*?)class\=\"matched-word\"\>)|(<\/strong\>)/gi,"");a.title.long=b,a.title.short=c,a.content=d,f.push(a)})),a.$parent.filterPostsTemplate.posts=f,lscfPostsList.constructHover(),a.directiveInfo.afterPostsLoadCallback(),a.loadMoreBtn.postsLoading=!1}})}),a.$watch("pxsearch_woo_sku",function(b,c){"undefined"!=typeof b&&b!=c&&(a.loadMoreBtn.postsLoading=!0),a.$watch("postsHasLoaded",function(d,e){if(!0===d&&"undefined"!=typeof b&&b!=c){a.$parent.loadMoreBtn.morePostsAvailable=!1;var f=[];""!==b?posts.forEach(function(a){"undefined"!=typeof a.woocommerce.sku&&a.woocommerce.sku.toLowerCase().indexOf(b.toLowerCase())!=-1&&f.push(a)}):"undefined"!==posts&&posts.forEach(function(a){f.push(a)}),a.$parent.filterPostsTemplate.posts=f,lscfPostsList.constructHover()}})})}}}]),angular.module(angAppName).directive("viewmodePortrait",["customFilterService",function(a){return{restrict:"AE",scope:!0,bindToController:!0,controllerAs:"vm",templateUrl:lscfShortcodeData[0].plugin_url+"app/views/posts-portrait.html",link:function(a,b,c){a.actionSettings.initPostTheme=!0,a.directiveInfo.ready=function(){},a.directiveInfo.afterPostsLoadCallback=function(){}}}}]),angular.module(angAppName).directive("sidebarLiveCustomizer",["customFilterService",function(a){return{restrict:"AE",require:"?ngModel",scope:!0,bindToController:!0,controllerAs:"vm",templateUrl:lscfShortcodeData[0].plugin_url+"app/views/sidebar-live-customizer.html",link:function(a,b,c,d){a.$watch("pluginSettings.custom_templates",function(b,c){if("undefined"!=typeof a.pluginSettings.filterSettings.theme.custom_template&&"undefined"!=typeof a.pluginSettings.custom_templates&&"custom-theme"==a.pluginSettings.filterSettings.theme.display)for(var d=0;d<a.pluginSettings.custom_templates.length;d++)a.pluginSettings.filterSettings.theme.custom_template.slug==a.pluginSettings.custom_templates[d].slug?a.pluginSettings.custom_templates[d].checked=!0:a.pluginSettings.custom_templates[d].checked=!1});var e,f,g=lscfShortcodeData[a.actionSettings.controllerAttributes.index],h=new lscfSidebarCustomizator(g);setTimeout(function(){h.init(),h.initColorpicker(function(b){h.generateDynamicCssColor(b),a.$apply(function(){a.pluginSettings.filterSettings["main-color"]=b.hex,a.pluginSettings.filterSettings["main-color-rgb"]=b.rgb,e=angular.toJson(a.pluginSettings),h.saveSettings(e)})}),h.saveExtraOptions(function(b){a.$apply(function(){switch(b.type){case"taxonomies-listing":a.pluginSettings.filterSettings.theme.posts_display_from=b.data;break;case"settings-page":a.pluginSettings.generalSettings.run_shortcodes=h.templateData.settings.run_shortcodes.value,a.pluginSettings.generalSettings.disable_empty_option_on_filtering=h.templateData.settings.disable_empty_option_on_filtering.value,a.pluginSettings.generalSettings.infinite_scrolling=h.templateData.settings.infinite_scrolling.value,a.pluginSettings.generalSettings.checkboxes_conditional_logic=h.templateData.settings.checkboxes_conditional_logic.value,a.pluginSettings.generalSettings.lscf_custom_fields_order_as=h.templateData.settings.lscf_custom_fields_order_as.value,a.pluginSettings.generalSettings.order_by=h.templateData.settings.order_by,a.pluginSettings.generalSettings.default_order_by=h.templateData.settings.default_order_by,a.pluginSettings.generalSettings.url_history=h.templateData.settings.url_history.value,a.pluginSettings.generalSettings.instant_search=h.templateData.settings.instant_search.value,a.pluginSettings.generalSettings.general_search_by=h.templateData.settings.general_search_by,a.pluginSettings.generalSettings.hide_see_more_on_checkboxes_list=h.templateData.settings.hide_see_more_on_checkboxes_list.value,a.pluginSettings.generalSettings.general_search_conditional_logic=h.templateData.settings.general_search_conditional_logic.value,a.pluginSettings.generalSettings.general_search_algorithm=h.templateData.settings.general_search_algorithm.value,a.pluginSettings.generalSettings.range_filtering_type=h.templateData.settings.range_filtering_type.value;break;case"woo-settings":a.pluginSettings.generalSettings.woo_price_format=h.templateData.settings.woo_price_format.value,a.pluginSettings.generalSettings.woo_instock=h.templateData.settings.woo_instock.value}e=angular.toJson(a.pluginSettings),h.saveSettings(e)})}),h.onFormAction(function(b){switch(b.dataType){case"order-fields":a.$apply(function(){a.actionSettings.initFieldsDraggable=b.fieldValue});break;case"sidebar-position":a.$apply(function(){a.pluginSettings.filterSettings.theme.sidebar.position=b.fieldValue,a.actionSettings.initSidebar=!0,f=a.makeWrapperClassName(),a.pluginSettings.className.sidebar=f.sidebar,a.pluginSettings.className.posts_theme=f.posts_theme});break;case"theme-style":a.$apply(function(){if(a.pluginSettings.filterSettings.theme.display=b.fieldValue,"custom-theme"==b.fieldValue){var c=parseInt(b.custom_theme_active_index);
"undefined"==typeof a.pluginSettings.filterSettings.theme.custom_template&&(a.pluginSettings.filterSettings.theme.custom_template={}),a.pluginSettings.filterSettings.theme.custom_template.url=a.pluginSettings.custom_templates[c].url,a.pluginSettings.filterSettings.theme.custom_template.name=a.pluginSettings.custom_templates[c].name,a.pluginSettings.filterSettings.theme.custom_template.slug=a.pluginSettings.custom_templates[c].slug}});break;case"columns-number":var c=parseInt(b.fieldValue);a.$apply(function(){a.pluginSettings.filterSettings.theme.columns=c,a.pluginSettings.className.sidebar=c>3?"col-sm-2 col-md-2 col-lg-2":"col-sm-3 col-md-3 col-lg-3",a.pluginSettings.className.posts_theme=c>3?"col-sm-10 col-md-10 col-lg-10":"col-sm-9 col-md-9 col-lg-9"});break;case"view-changer":switch(b.fieldValue){case"full":a.$apply(function(){a.pluginSettings.filterSettings.theme.viewchanger.grid=1,a.pluginSettings.filterSettings.theme.viewchanger.list=1}),jQuery(".viewMode").fadeIn(),jQuery(".lscf-posts-block").addClass("block-view"),jQuery(".viewMode > div").removeClass("active"),jQuery(".viewMode #blockView").addClass("active");break;case"list":a.$apply(function(){a.pluginSettings.filterSettings.theme.viewchanger.grid=0,a.pluginSettings.filterSettings.theme.viewchanger.list=1}),jQuery(".viewMode").hide(),jQuery(".lscf-posts-block").removeClass("block-view");break;case"grid":a.$apply(function(){a.pluginSettings.filterSettings.theme.viewchanger.grid=1,a.pluginSettings.filterSettings.theme.viewchanger.list=0}),jQuery(".viewMode").hide(),jQuery(".lscf-posts-block").addClass("block-view")}break;case"link-type":a.$apply(function(){a.pluginSettings.filterSettings.theme.link_type=b.fieldValue,a.actionSettings.initPostTheme=!0});break;case"posts-per-page":a.$apply(function(){a.actionSettings.postsPerPage=b.fieldValue,a.pluginSettings.filterSettings["posts-per-page"]=b.fieldValue})}e=angular.toJson(a.pluginSettings),h.saveSettings(e)})},800)}}}]),angular.module(angAppName).directive("sortBy",["customFilterService",function(a){return{restrict:"AE",require:"?ngModel",scope:!0,bindToController:!0,controllerAs:"vm",link:function(b,c,d,e){var f,g,h,i=!1,j=jQuery,k=lscfShortcodeData[b.actionSettings.controllerAttributes.index];b.$watch("pluginSettings.generalSettings.order_by.items",function(d,e){"undefined"!=typeof b.pluginSettings.generalSettings.order_by&&"undefined"!=typeof b.pluginSettings.generalSettings.order_by.items&&b.pluginSettings.generalSettings.order_by.items.length>0&&(h='<select data-class="lscf-order-by-dropdown lscf-sorting-by" class="lscf-sorting-custom-dropdown">',h+='<option value="0">'+b.pluginSettings.generalSettings.writing.sort_by+"</option>",b.pluginSettings.generalSettings.order_by.items.forEach(function(a){var c="woo_price"===a.id?b.pluginSettings.generalSettings.writing.price:a.name;h+='<option value="'+a.id+'">'+c+"</option>"}),h+="</select>",h+='<div class="lscf-sorting-opt">',h+='<div class="lscf-sort-up"><span class="glyphicon glyphicon-triangle-top"></span></div>',h+='<div class="lscf-sort-down"><span class="glyphicon glyphicon-triangle-bottom"></span></div>',h+="</div>",c[0].innerHTML=h,lscfSortingCustomDropddown(),"undefined"!=typeof k.settings.theme.posts_display_from&&"undefined"!==k.settings.theme.posts_display_from.post_taxonomies.active_terms&&k.settings.theme.posts_display_from.post_taxonomies.active_terms.length>0&&b.actionSettings.activeQuery.push({ID:"default_filter",type:"default_filter",default_filter:{post_taxonomies:k.settings.theme.posts_display_from.post_taxonomies}}),j(".px-capf-wrapper").addClass("lscf-active-sort-by"),j(".lscf-sort-up").click(function(){j(this).addClass("active"),j(".lscf-sort-down").removeClass("active");for(var c="DESC",d=0;d<b.actionSettings.activeQuery.length;d++)if(f=b.actionSettings.activeQuery[d],"order-by"==f.ID){b.actionSettings.activeQuery[d].order=c,i=!0;break}!1===i&&(query={ID:"order-by",filter_as:null,type:"order-posts",order:c,value:"post_date"},b.actionSettings.activeQuery.push(query)),b.loadMoreBtn.postsLoading=!0,a.getPosts(b.postType,b.actionSettings.postsPerPage,1,b.actionSettings.activeQuery,k).then(function(a){a=a.data,b.actionSettings.postsCount=a.postsCount,b.actionSettings.pagesCount=a.pages,b.actionSettings.pxCurrentPage=2,b.actionSettings.pxCurrentPage<=a.pages?b.loadMoreBtn.morePostsAvailable=!0:b.loadMoreBtn.morePostsAvailable=!1,b.actionSettings.filterPostsTemplate=a.posts,b.filterPostsTemplate.posts=a.posts,b.loadMoreBtn.postsLoading=!1,b.directiveInfo.afterPostsLoadCallback()})}),j(".lscf-sort-down").click(function(){j(this).addClass("active"),j(".lscf-sort-up").removeClass("active");for(var c="ASC",d=0;d<b.actionSettings.activeQuery.length;d++)if(f=b.actionSettings.activeQuery[d],"order-by"==f.ID){b.actionSettings.activeQuery[d].order=c,i=!0;break}!1===i&&(query={ID:"order-by",filter_as:null,type:"order-posts",order:c,value:"post_date"},b.actionSettings.activeQuery.push(query)),b.loadMoreBtn.postsLoading=!0,a.getPosts(b.postType,b.actionSettings.postsPerPage,1,b.actionSettings.activeQuery,k).then(function(a){a=a.data,b.actionSettings.postsCount=a.postsCount,b.actionSettings.pagesCount=a.pages,b.actionSettings.pxCurrentPage=2,b.actionSettings.pxCurrentPage<=a.pages?b.loadMoreBtn.morePostsAvailable=!0:b.loadMoreBtn.morePostsAvailable=!1,b.actionSettings.filterPostsTemplate=a.posts,b.filterPostsTemplate.posts=a.posts,b.loadMoreBtn.postsLoading=!1,b.directiveInfo.afterPostsLoadCallback()})}),j(".lscf-sorting-by .lscf-dropdown-option").each(function(){j(this).click(function(){g=j(this).attr("rel"),"0"==g?(g="post_date",j(".lscf-sorting-by").removeClass("active"),j(".lscf-sort-down").removeClass("active"),j(".lscf-sort-up").removeClass("active")):j(".lscf-sorting-by").addClass("active");for(var c=0;c<b.actionSettings.activeQuery.length;c++)if(f=b.actionSettings.activeQuery[c],"order-by"==f.ID){b.actionSettings.activeQuery[c].value=g,i=!0;break}!1===i&&(query={ID:"order-by",filter_as:null,type:"order-posts",order:"ASC",value:g},b.actionSettings.activeQuery.push(query)),b.loadMoreBtn.postsLoading=!0,a.getPosts(b.postType,b.actionSettings.postsPerPage,1,b.actionSettings.activeQuery,k).then(function(a){a=a.data,b.actionSettings.postsCount=a.postsCount,b.actionSettings.pagesCount=a.pages,b.actionSettings.pxCurrentPage=2,b.actionSettings.pxCurrentPage<=a.pages?b.loadMoreBtn.morePostsAvailable=!0:b.loadMoreBtn.morePostsAvailable=!1,b.actionSettings.filterPostsTemplate=a.posts,b.filterPostsTemplate.posts=a.posts,b.loadMoreBtn.postsLoading=!1,b.directiveInfo.afterPostsLoadCallback()})})}))})}}}]),angular.module(angAppName).directive("viewmodeBasicGrid",["customFilterService",function(a){return{restrict:"AE",scope:!0,bindToController:!0,controllerAs:"vm",templateUrl:lscfShortcodeData[0].plugin_url+"app/views/posts-basic-grid.html",link:function(a,b,c){a.actionSettings.initPostTheme=!0,a.directiveInfo.ready=function(){},a.directiveInfo.afterPostsLoadCallback=function(){}}}}]),angular.module(angAppName).directive("viewmodeMasonryGrid",["customFilterService",function(a){return{restrict:"AE",scope:!0,bindToController:!0,controllerAs:"vm",templateUrl:lscfShortcodeData[0].plugin_url+"app/views/posts-mansonry.html",link:function(a,b,c){a.actionSettings.initPostTheme=!0,a.directiveInfo.ready=function(){},a.directiveInfo.afterPostsLoadCallback=function(){}}}}]),angular.module(angAppName).directive("viewmodeWoocommerceGrid",["customFilterService",function(a){return{restrict:"AE",scope:!0,bindToController:!0,controllerAs:"vm",templateUrl:lscfShortcodeData[0].plugin_url+"app/views/posts-woocommerce-grid-2.html",link:function(a,b,c){a.gridColumns=3,a.changeGridType=function(b,c){for(var d=document.getElementsByClassName("lscf-woo-grid-type"),e=0;e<d.length;e++)d[e].className="lscf-woo-grid-type";b.currentTarget.className="lscf-woo-grid-type active",a.gridColumns=c},a.actionSettings.initPostTheme=!0,a.directiveInfo.ready=function(){},a.directiveInfo.afterPostsLoadCallback=function(){}}}}]),angular.module(angAppName).directive("viewmodeWoocommerce",["customFilterService",function(a){return{restrict:"AE",scope:!0,bindToController:!0,controllerAs:"vm",templateUrl:lscfShortcodeData[0].plugin_url+"app/views/posts-woocommerce.html",link:function(a,b,c){a.actionSettings.initPostTheme=!0,a.directiveInfo.ready=function(){},a.directiveInfo.afterPostsLoadCallback=function(){}}}}]);